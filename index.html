<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>‚ö° Material Estimator</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #f3f6fa;
      margin: 0;
      padding: 0;
    }
    header {
      background: linear-gradient(135deg, #0052D4, #4364F7, #6FB1FC);
      color: white;
      text-align: center;
      padding: 25px 15px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    header h1 {
      margin: 0;
      font-size: 2rem;
      letter-spacing: 1px;
    }
    header p {
      margin-top: 10px;
      font-size: 1rem;
      opacity: 0.9;
    }
    .container {
      max-width: 1100px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }
    h2 {
      color: #333;
      border-bottom: 2px solid #eee;
      padding-bottom: 8px;
    }
    .details input {
      margin: 8px;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      width: 220px;
    }
    /* Project Type Selector Styling */
    .project-type {
      text-align: center;
      margin: 20px 0;
      padding: 20px;
      border-radius: 12px;
      background: #f0f4ff;
      border: 2px solid #0052D4;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    }
    .project-type label {
      font-size: 1.2rem;
      font-weight: bold;
      color: #0052D4;
      margin-right: 10px;
    }
    .project-type select {
      padding: 12px 18px;
      font-size: 1rem;
      border-radius: 8px;
      border: 2px solid #0052D4;
      background: white;
      cursor: pointer;
      transition: 0.3s;
    }
    .project-type select:hover {
      border-color: #4364F7;
      box-shadow: 0 0 8px rgba(67,100,247,0.5);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    table th, table td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }
    table th {
      background: #0052D4;
      color: white;
      position: sticky;
      top: 0;
    }
    input, select {
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .btn {
      padding: 10px 15px;
      margin: 8px 4px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: 0.3s;
    }
    .btn-add { background: #28a745; color: white; }
    .btn-add:hover { background: #218838; }
    .btn-remove { background: #dc3545; color: white; }
    .btn-remove:hover { background: #c82333; }
    .btn-download { background: #007bff; color: white; }
    .btn-download:hover { background: #0056b3; }
    .grand-total {
      font-size: 1.2rem;
      text-align: right;
      margin-top: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>
    <h1>‚ö° Material Estimator</h1>
    <p>Smart way to calculate electrical materials and project cost</p>
  </header>

  <div class="container">
    <h2>Customer & Project Details</h2>
    <div class="details">
      <input type="text" placeholder="Customer Name">
      <input type="text" placeholder="Mobile Number">
      <input type="text" placeholder="Location">
      <input type="text" placeholder="Electrician Name">
      <input type="date">
    </div>

    <!-- Project Type Selector -->
    <div class="project-type">
      <label for="projectType">üìå Select Project Type:</label>
      <select id="projectType" onchange="changeProjectType()">
        <option value="residential">üè† Residential</option>
        <option value="commercial">üè¢ Commercial</option>
        <option value="industrial">üè≠ Industrial</option>
      </select>
    </div>

    <h2>Materials List</h2>
    <table id="materialsTable">
      <thead>
        <tr>
          <th>Material</th>
          <th>Rating</th>
          <th>Quantity</th>
          <th>Rate (‚Çπ)</th>
          <th>Total (‚Çπ)</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
    <button class="btn btn-add" onclick="addRow()">+ Add Material</button>
    <button class="btn btn-download" onclick="downloadPDF()">‚¨á Save as PDF</button>

    <div class="grand-total" id="grandTotal">Grand Total: ‚Çπ0</div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
  <script>
    const materialsByProject = {
      residential: [
        "1.5 sqmm Wire (Red)", "1.5 sqmm Wire (Black)", "1.5 sqmm Wire (Green)",
        "2.5 sqmm Wire", "4 sqmm Wire", "6 sqmm Wire", "10 sqmm Wire",
        "Socket 6A", "Socket 16A", "Switch 6A", "Switch 16A",
        "LED Bulb 9W", "LED Bulb 12W", "Tube Light 20W", "Fan 48 Inch",
        "Regulator", "3 Pin Plug 6A", "3 Pin Plug 16A", "Ceiling Rose",
        "PVC Pipe 20mm", "PVC Pipe 25mm", "PVC Elbow", "PVC Junction Box"
      ],
      commercial: [
        "25 sqmm Wire", "32A MCB", "63A MCB", "Distribution Box 8 Way",
        "Main Switch 32A", "Main Switch 63A", "Flood Light 50W", "Flood Light 100W",
        "Energy Meter Single Phase", "Energy Meter Three Phase", "Busbar",
        "Panel Board", "Isolator 40A", "Isolator 63A", "Timer Switch",
        "Contactor 9A", "Contactor 12A", "Relay 12V", "Relay 24V", "Relay 230V"
      ],
      industrial: [
        "16 sqmm Wire", "25 sqmm Wire", "32A MCB", "100A MCB", "Four Pole MCB",
        "Distribution Box 12 Way", "Main Switch 100A", "Changeover Switch 63A",
        "Changeover Switch 100A", "Starter 5HP", "Starter 10HP", "Capacitor 25 MFD",
        "Earthing Plate", "Earthing Rod", "GI Wire 8SWG", "DB Box Double Door",
        "Contactor 25A", "Panel Board", "Energy Meter Three Phase", "Busbar"
      ]
    };

    const ratingOptions = [
      "1A","2A","6A","10A","16A","20A","25A","32A","40A","63A","100A",
      "230V","440V","0.5 HP","1 HP","2 HP","3 HP","5 HP","10 HP",
      "9W","12W","18W","20W","40W","50W","100W"
    ];

    let currentMaterials = materialsByProject.residential;

    function changeProjectType() {
      const type = document.getElementById("projectType").value;
      currentMaterials = materialsByProject[type];
      document.getElementById("tableBody").innerHTML = ""; // clear table
    }

    function addRow() {
      const tableBody = document.getElementById("tableBody");
      const row = document.createElement("tr");

      row.innerHTML = `
        <td>
          <select>
            ${currentMaterials.map(m => `<option value="${m}">${m}</option>`).join("")}
          </select>
        </td>
        <td>
          <select>
            ${ratingOptions.map(r => `<option value="${r}">${r}</option>`).join("")}
          </select>
        </td>
        <td><input type="number" min="1" value="1" onchange="updateTotal(this)"></td>
        <td><input type="number" min="0" value="0" onchange="updateTotal(this)"></td>
        <td class="total">0</td>
        <td><button class="btn btn-remove" onclick="removeRow(this)">X</button></td>
      `;
      tableBody.appendChild(row);
    }

    function removeRow(btn) {
      btn.closest("tr").remove();
      updateGrandTotal();
    }

    function updateTotal(input) {
      const row = input.closest("tr");
      const qty = row.querySelectorAll("input")[0].value || 0;
      const rate = row.querySelectorAll("input")[1].value || 0;
      const total = qty * rate;
      row.querySelector(".total").innerText = total;
      updateGrandTotal();
    }

    function updateGrandTotal() {
      let total = 0;
      document.querySelectorAll(".total").forEach(td => total += parseFloat(td.innerText || 0));
      document.getElementById("grandTotal").innerText = "Grand Total: ‚Çπ" + total;
    }

    function downloadPDF() {
      const element = document.querySelector(".container");
      html2pdf().from(element).set({
        margin: 10,
        filename: 'Material_Estimate.pdf',
        html2canvas: { scale: 2 },
        jsPDF: { orientation: 'portrait' }
      }).save();
    }
  </script>
</body>
</html>
