<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>‚ö° Material Estimator</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #f3f6fa;
      margin: 0;
      padding: 0;
    }
    header {
      background: linear-gradient(135deg, #0052D4, #4364F7, #6FB1FC);
      color: white;
      text-align: center;
      padding: 25px 15px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    header h1 {
      margin: 0;
      font-size: 2rem;
      letter-spacing: 1px;
    }
    header p {
      margin-top: 10px;
      font-size: 1rem;
      opacity: 0.9;
    }
    .container {
      max-width: 1100px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }
    h2 {
      color: #333;
      border-bottom: 2px solid #eee;
      padding-bottom: 8px;
    }
    .details input {
      margin: 8px;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      width: 220px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    table th, table td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }
    table th {
      background: #0052D4;
      color: white;
      position: sticky;
      top: 0;
    }
    input, select {
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .btn {
      padding: 10px 15px;
      margin: 8px 4px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: 0.3s;
    }
    .btn-add { background: #28a745; color: white; }
    .btn-add:hover { background: #218838; }
    .btn-remove { background: #dc3545; color: white; }
    .btn-remove:hover { background: #c82333; }
    .btn-download { background: #007bff; color: white; }
    .btn-download:hover { background: #0056b3; }
    .grand-total {
      font-size: 1.2rem;
      text-align: right;
      margin-top: 20px;
      font-weight: bold;
    }

    /* Attractive project type selector */
    .project-type {
      margin: 15px 0;
      text-align: center;
    }
    .project-type select {
      padding: 12px 20px;
      font-size: 1rem;
      border-radius: 10px;
      border: 2px solid #0052D4;
      background: linear-gradient(135deg, #6FB1FC, #4364F7);
      color: white;
      font-weight: bold;
      cursor: pointer;
      outline: none;
    }
    .project-type select:hover {
      background: linear-gradient(135deg, #0052D4, #6FB1FC);
    }
  </style>
</head>
<body>
  <header>
    <h1>‚ö° Material Estimator</h1>
    <p>Smart way to calculate electrical materials and project cost</p>
  </header>

  <div class="container">
    <h2>Customer & Project Details</h2>
    <div class="details">
      <input type="text" placeholder="Customer Name">
      <input type="text" placeholder="Mobile Number">
      <input type="text" placeholder="Location">
      <input type="text" placeholder="Electrician Name">
      <input type="date">
    </div>

    <div class="project-type">
      <label style="font-weight:bold; font-size:1.1rem; margin-right:10px;">Select Project Type:</label>
      <select id="projectType" onchange="changeProjectType()">
        <option value="house">üè† House Wiring</option>
        <option value="industrial">üè≠ Industrial Wiring</option>
        <option value="solar">‚òÄ Solar Panel Design</option>
      </select>
    </div>

    <h2>Materials List</h2>
    <table id="materialsTable">
      <thead>
        <tr>
          <th>Material</th>
          <th>Rating</th>
          <th>Quantity</th>
          <th>Rate (‚Çπ)</th>
          <th>Total (‚Çπ)</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
    <button class="btn btn-add" onclick="addRow()">+ Add Material</button>
    <button class="btn btn-download" onclick="downloadPDF()">‚¨á Save as PDF</button>

    <div class="grand-total" id="grandTotal">Grand Total: ‚Çπ0</div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
  <script>
    // Material lists for each project type
    const materials = {
      house: [
        "1.5 sqmm Wire (Red)", "1.5 sqmm Wire (Black)", "1.5 sqmm Wire (Green)",
        "2.5 sqmm Wire", "4 sqmm Wire", "6 sqmm Wire", "10 sqmm Wire",
        "32A MCB", "63A MCB", "100A MCB",
        "Single Pole MCB", "Double Pole MCB", "Four Pole MCB",
        "Distribution Box 4 Way", "Distribution Box 8 Way",
        "Socket 6A", "Socket 16A", "Switch 6A", "Switch 16A",
        "Fan 48 Inch", "Fan 56 Inch", "LED Bulb 9W", "LED Bulb 12W",
        "Tube Light 20W", "Tube Light 40W", "CFL Lamp 18W",
        "Flood Light 50W", "Ceiling Rose", "PVC Pipe 20mm",
        "PVC Junction Box", "Earthing Rod", "Service Wire 2 Core",
        "3 Pin Plug 6A", "Regulator", "Bell", "Buzzer", "Energy Meter Single Phase"
      ],
      industrial: [
        "16 sqmm Wire", "25 sqmm Wire", "50 sqmm Wire", "95 sqmm Wire",
        "MCB 125A", "MCCB 250A", "MCCB 400A", "MCCB 630A",
        "Busbar", "Panel Board", "Contactor 9A", "Contactor 12A",
        "Contactor 25A", "Contactor 50A", "Contactor 100A",
        "Relay 24V", "Relay 230V", "Overload Relay",
        "Starter 5HP", "Starter 10HP", "Starter 20HP",
        "Capacitor Bank", "Changeover Switch 100A", "Changeover Switch 200A",
        "Cable Tray", "GI Wire 8SWG", "Earthing Plate", "Isolator 200A",
        "Industrial Socket 32A", "Industrial Socket 63A",
        "Motor 5HP", "Motor 10HP", "Motor 20HP", "VFD Drive 5HP",
        "VFD Drive 10HP", "Control Transformer", "Timer Relay",
        "Push Button Switch", "Limit Switch", "Pilot Lamp"
      ],
      solar: [
        "Solar Panel 150W", "Solar Panel 250W", "Solar Panel 330W",
        "Solar Panel 450W", "MC4 Connector", "Combiner Box",
        "DC MCB 32A", "DC MCB 63A", "SPD (DC)", "SPD (AC)",
        "Inverter 1kW", "Inverter 3kW", "Inverter 5kW", "Inverter 10kW",
        "Battery 12V 100Ah", "Battery 12V 200Ah", "Battery 2V 500Ah",
        "Charge Controller 12V", "Charge Controller 24V",
        "Earthing Kit", "Lightning Arrester",
        "DC Cable 4 sqmm", "DC Cable 6 sqmm", "DC Cable 10 sqmm",
        "AC Cable 10 sqmm", "AC Cable 25 sqmm",
        "Mounting Structure", "Cable Tie", "Junction Box",
        "Energy Meter (Solar)", "Data Logger", "PV Combiner Fuse",
        "Isolator DC 1000V", "Isolator AC 63A", "Hybrid Inverter 5kW"
      ]
    };

    // Ratings for each project type
    const ratings = {
      house: ["1A","2A","6A","10A","16A","20A","25A","32A","40A","63A","100A","230V","9W","12W","18W","20W","40W","50W","100W"],
      industrial: ["32A","63A","100A","125A","200A","250A","400A","630A","230V","440V","5 HP","10 HP","20 HP","50 HP"],
      solar: ["12V","24V","48V","100V","230V","330W","450W","1kW","3kW","5kW","10kW","100Ah","200Ah","500Ah"]
    };

    let currentMaterials = materials.house;
    let currentRatings = ratings.house;

    function changeProjectType() {
      const type = document.getElementById("projectType").value;
      currentMaterials = materials[type];
      currentRatings = ratings[type];
      document.getElementById("tableBody").innerHTML = ""; // clear table
    }

    function addRow() {
      const tableBody = document.getElementById("tableBody");
      const row = document.createElement("tr");

      row.innerHTML = `
        <td>
          <select>
            ${currentMaterials.map(m => `<option value="${m}">${m}</option>`).join("")}
          </select>
        </td>
        <td>
          <select>
            ${currentRatings.map(r => `<option value="${r}">${r}</option>`).join("")}
          </select>
        </td>
        <td><input type="number" min="1" value="1" onchange="updateTotal(this)"></td>
        <td><input type="number" min="0" value="0" onchange="updateTotal(this)"></td>
        <td class="total">0</td>
        <td><button class="btn btn-remove" onclick="removeRow(this)">X</button></td>
      `;
      tableBody.appendChild(row);
    }

    function removeRow(btn) {
      btn.closest("tr").remove();
      updateGrandTotal();
    }

    function updateTotal(input) {
      const row = input.closest("tr");
      const qty = row.querySelectorAll("input")[0].value || 0;
      const rate = row.querySelectorAll("input")[1].value || 0;
      const total = qty * rate;
      row.querySelector(".total").innerText = total;
      updateGrandTotal();
    }

    function updateGrandTotal() {
      let total = 0;
      document.querySelectorAll(".total").forEach(td => total += parseFloat(td.innerText || 0));
      document.getElementById("grandTotal").innerText = "Grand Total: ‚Çπ" + total;
    }

    function downloadPDF() {
      const element = document.querySelector(".container");
      html2pdf().from(element).set({
        margin: 10,
        filename: 'Material_Estimate.pdf',
        html2canvas: { scale: 2 },
        jsPDF: { orientation: 'portrait' }
      }).save();
    }
  </script>
</body>
</html>
