<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Material Estimator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f9fc;
      margin: 0;
      padding: 0;
      color: #333;
    }

    header {
      background: #004080;
      color: white;
      text-align: center;
      padding: 15px;
      font-size: 24px;
      font-weight: bold;
    }

    .container {
      width: 85%;
      margin: 20px auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }

    h2 {
      color: #004080;
      border-bottom: 2px solid #004080;
      padding-bottom: 5px;
    }

    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }

    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    button {
      margin-top: 15px;
      padding: 10px 15px;
      background: #004080;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    button:hover {
      background: #0059b3;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    table, th, td {
      border: 1px solid #ccc;
    }

    th, td {
      padding: 8px;
      text-align: center;
    }

    tfoot td {
      font-weight: bold;
      background: #f0f0f0;
    }

    .summary {
      margin-top: 20px;
      padding: 10px;
      background: #f0f8ff;
      border-left: 5px solid #004080;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <header>Material Estimator</header>
  <div class="container">
    <h2>Customer & Project Details</h2>
    <label>Customer Name</label>
    <input type="text" id="custName">
    <label>Customer Mobile No</label>
    <input type="text" id="custMobile">
    <label>Location</label>
    <input type="text" id="custLocation">
    <label>Electrician Name</label>
    <input type="text" id="elecName">
    <label>Date</label>
    <input type="date" id="date">

    <h2>Work Category</h2>
    <label>Select Work Type</label>
    <select id="workCategory" onchange="loadSuggestedItems()">
      <option value="">-- Select --</option>
      <option value="house">House Wiring</option>
      <option value="industrial">Industrial Wiring</option>
      <option value="street">Street Lighting</option>
      <option value="solar">Solar Installation</option>
    </select>

    <h2>Materials Estimation</h2>
    <label>Material</label>
    <select id="material">
      <option value="Wire">Wire</option>
      <option value="Switch">Switch</option>
      <option value="MCB">MCB</option>
      <option value="DB Box">DB Box</option>
      <option value="LED Light">LED Light</option>
      <option value="Fan">Fan</option>
      <option value="Conduit Pipe">Conduit Pipe</option>
      <option value="Solar Panel">Solar Panel</option>
    </select>

    <label>Rating</label>
    <select id="rating">
      <option value="1 sq.mm">1 sq.mm</option>
      <option value="1.5 sq.mm">1.5 sq.mm</option>
      <option value="6A">6A</option>
      <option value="16A">16A</option>
      <option value="32A">32A</option>
      <option value="63A">63A</option>
      <option value="230V">230V</option>
      <option value="440V">440V</option>
      <option value="250W">250W</option>
      <option value="500W">500W</option>
    </select>

    <label>Unit</label>
    <select id="unit">
      <option value="Nos">Nos</option>
      <option value="Meters">Meters</option>
      <option value="Rolls">Rolls</option>
      <option value="Sq.mm">Sq.mm</option>
      <option value="Set">Set</option>
    </select>

    <label>Quantity</label>
    <input type="number" id="qty" min="1">

    <button onclick="addItem()">Add Item</button>

    <table id="materialsTable">
      <thead>
        <tr>
          <th>Material</th>
          <th>Rating</th>
          <th>Unit</th>
          <th>Quantity</th>
          <th>Category</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div class="summary" id="summaryBox">
      <h3>Category Summary</h3>
      <p id="wireCost">Wires: 0 items</p>
      <p id="switchCost">Switches: 0 items</p>
      <p id="protectionCost">Protection Devices (MCB/DB): 0 items</p>
      <p id="lightingCost">Lighting Fixtures: 0 items</p>
      <p id="othersCost">Others: 0 items</p>
    </div>

    <button onclick="window.print()">Download as PDF</button>
  </div>

  <script>
    function addItem() {
      let mat = document.getElementById("material").value;
      let rate = document.getElementById("rating").value;
      let unit = document.getElementById("unit").value;
      let qty = document.getElementById("qty").value;

      if (!qty) {
        alert("Enter quantity!");
        return;
      }

      let category = getCategory(mat);

      let table = document.getElementById("materialsTable").getElementsByTagName('tbody')[0];
      let newRow = table.insertRow();
      newRow.insertCell(0).innerText = mat;
      newRow.insertCell(1).innerText = rate;
      newRow.insertCell(2).innerText = unit;
      newRow.insertCell(3).innerText = qty;
      newRow.insertCell(4).innerText = category;

      updateSummary();
    }

    function getCategory(material) {
      if (material.includes("Wire") || material.includes("Conduit")) return "Wires";
      if (material.includes("Switch")) return "Switches";
      if (material.includes("MCB") || material.includes("DB")) return "Protection";
      if (material.includes("LED") || material.includes("Fan")) return "Lighting";
      return "Others";
    }

    function updateSummary() {
      let rows = document.querySelectorAll("#materialsTable tbody tr");
      let summary = { Wires: 0, Switches: 0, Protection: 0, Lighting: 0, Others: 0 };

      rows.forEach(row => {
        let cat = row.cells[4].innerText;
        summary[cat]++;
      });

      document.getElementById("wireCost").innerText = "Wires: " + summary.Wires + " items";
      document.getElementById("switchCost").innerText = "Switches: " + summary.Switches + " items";
      document.getElementById("protectionCost").innerText = "Protection Devices (MCB/DB): " + summary.Protection + " items";
      document.getElementById("lightingCost").innerText = "Lighting Fixtures: " + summary.Lighting + " items";
      document.getElementById("othersCost").innerText = "Others: " + summary.Others + " items";
    }

    function loadSuggestedItems() {
      let category = document.getElementById("workCategory").value;
      let suggestions = {
        house: ["Wire", "Switch", "Fan", "LED Light", "MCB"],
        industrial: ["Wire", "MCB", "DB Box", "Conduit Pipe"],
        street: ["LED Light", "Conduit Pipe", "Switch"],
        solar: ["Solar Panel", "MCB", "DB Box"]
      };

      if (suggestions[category]) {
        alert("Suggested items for " + category + ": " + suggestions[category].join(", "));
      }
    }
  </script>
</body>
</html>
