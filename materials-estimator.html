<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Materials Estimator</title>
  <style>
    :root{
      --bg:#0b1020; --card:#121a2f; --ink:#e9eefc; --muted:#a9b3ce;
      --accent:#5aa0ff; --danger:#ff6b6b; --ring:#2a3557; --radius:16px;
    }
    body{margin:0; background:#0b1020; color:var(--ink); font-family:sans-serif;}
    .wrap{max-width:900px; margin:20px auto; padding:0 16px;}
    header{display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;}
    h1{margin:0; font-size:22px}
    .toolbar{display:flex; gap:10px; flex-wrap:wrap;}
    button{padding:8px 14px; border:none; border-radius:8px; cursor:pointer;}
    .btn-accent{background:var(--accent); color:#fff;}
    .btn-ghost{background:#333; color:#fff;}
    .btn-danger{background:var(--danger); color:#fff;}
    .card{background:var(--card); border-radius:12px; padding:12px;}
    table{width:100%; border-collapse:collapse;}
    thead th{color:var(--muted); text-align:left; padding:6px;}
    tbody td{padding:6px;}
    tbody tr{background:#1a1f33;}
    input,select{width:100%; padding:6px; border-radius:6px; border:none; background:#0e1733; color:#fff;}
    .idx{text-align:center; color:var(--muted);}
    .row-actions{text-align:center;}
    .empty{color:var(--muted); text-align:center; padding:10px;}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Materials Estimator</h1>
      <div class="toolbar">
        <button class="btn-accent" id="addRowBtn">＋ Add Item</button>
        <button class="btn-ghost" id="clearBtn">Clear</button>
        <button class="btn-accent" id="printBtn">Download PDF</button>
      </div>
    </header>

    <div class="card">
      <table>
        <thead>
          <tr>
            <th class="idx">#</th>
            <th>Material</th>
            <th>Qty</th>
            <th>Unit</th>
            <th>Notes</th>
            <th class="row-actions">Action</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
      <div class="empty" id="emptyHint">No items yet — click Add Item to start.</div>
    </div>
  </div>

  <script>
    const tbody = document.getElementById("tbody");
    const emptyHint = document.getElementById("emptyHint");
    const units = ["Nos","Meters","Kg","Feet"];

    function generateId(){
      return Date.now().toString(36)+Math.random().toString(36).substr(2,5);
    }

    function makeRow(item={}, index=0){
      const tr = document.createElement("tr");
      tr.dataset.id = item.id || generateId();

      tr.innerHTML = `
        <td class="idx">${index+1}</td>
        <td><input type="text" value="${item.name||""}" placeholder="Material name"></td>
        <td><input type="number" value="${item.qty||""}" min="0" placeholder="0"></td>
        <td>
          <select>
            ${units.map(u=>`<option ${u===item.unit?"selected":""}>${u}</option>`).join("")}
          </select>
        </td>
        <td><input type="text" value="${item.note||""}" placeholder="Notes"></td>
        <td class="row-actions"><button class="btn-danger">Remove</button></td>
      `;

      tr.querySelector(".btn-danger").addEventListener("click",()=>{
        tr.remove();
        refreshIndex();
      });

      return tr;
    }

    function refreshIndex(){
      [...tbody.children].forEach((tr,i)=>{
        tr.querySelector(".idx").textContent = i+1;
      });
      emptyHint.style.display = tbody.children.length ? "none" : "block";
    }

    document.getElementById("addRowBtn").addEventListener("click",()=>{
      tbody.appendChild(makeRow({}, tbody.children.length));
      refreshIndex();
    });

    document.getElementById("clearBtn").addEventListener("click",()=>{
      tbody.innerHTML="";
      refreshIndex();
    });

    document.getElementById("printBtn").addEventListener("click",()=>window.print());

    // start with one row
    tbody.appendChild(makeRow({},0));
    refreshIndex();
  </script>
</body>
</html>
